/*!
 * Proa Tools Records v1.4.0 (https://github.com/proa-data/proa-tools-records)
 */
angular.module("proaTools.records",["ngAria","ui.bootstrap"]),function(){function t(t){t.maxSize=5,t.forceEllipses=!0,t.previousText=t.nextText=null,t.boundaryLinkNumbers=!0}t.$inject=["uibPaginationConfig"],angular.module("proaTools.records").config(t)}(),angular.module("proaTools.records").constant("PT_RECORDS_TEXTS",{number:"#",noData:"No data"}),function(){function t(e){return function(t,n){return t.enabledPagination?(t.currentPage-1)*e.itemsPerPage+n:n}}function n(e,r,c,o,s,l){return t.$inject=["$scope","$attrs"],{restrict:"A",scope:!0,controller:t,compile:function(){return function(n,t){var e=0;t.find("thead > tr:first").prepend(a("<th>"+o.number+"</th>")).find("th").each(function(){e+=angular.element(this).prop("colspan")}).end().end().find("tbody").append(a('<tr><td colspan="'+e+'" ng-if="!totalItems.length">'+o.noData+"</td></tr>")),n.exportingTable=t.get(0);var i=t.parent();function a(t){return l(t)(n)}i.hasClass("table-responsive")&&(t=i),t.before(a('<div class="clearfix" ng-show="totalItems.length"><ul uib-pagination total-items="totalItems.length" ng-model="currentPage" class="'+s+' pull-left" ng-show="enabledPagination"></ul><div class="btn-group pull-right" role="group"><button type="button" class="btn btn-default" ng-click="togglePagination()"><span class="fa-stack fa-stack-pt-records" ng-show="enabledPagination"><span class="far fa-file fa-stack-1x"></span><span class="fas fa-slash fa-stack-1x"></span></span><span class="far fa-file" ng-show="!enabledPagination"></span></button><button type="button" class="btn btn-default" ng-click="exportToXls()"><span class="fas fa-file-excel"></span></button></div></div>'))}}};function t(i,t){var a=e("limitTo"),o=e("orderBy");function n(){var t=i.orderConfig,n=o(i.totalItems,t.property,t.desc);if(i.enabledPagination){var e=c.itemsPerPage;i.$list=a(n,e,(i.currentPage-1)*e)}else i.$list=n}i.currentPage=1,i.enabledPagination=void 0===t.ptNoPagination,i.togglePagination=function(){i.enabledPagination=!i.enabledPagination},i.getRowNumber=function(t){return r(i,t)+1},i.exportToXls=function(){XLSX.writeFile(XLSX.utils.table_to_book(i.exportingTable),(t.ptFilename||"Excel")+".xlsx")},i.orderConfig={},i.sort=function(t){var n=i.orderConfig;n.property==t?(n.desc&&(t=void 0),n.desc=!n.desc):n.desc=!1;n.property=t},i.isActive=function(t){return i.orderConfig.property==t},i.getIconClass=function(t){var n=i.orderConfig;return"fa-sort"+(n.property==t?"-"+(n.desc?"down":"up"):"")},i.$watchCollection(t.ptList,function(t){i.totalItems=t,n()}),i.$watch("currentPage",n),i.$watch("enabledPagination",n),i.$watchCollection("orderConfig",n)}}function e(i,a){return function(e){return{restrict:"C",link:function(t,n){n.parent(".pagination."+i).length&&n.children("a").html(a('<span class="fas fa-chevron-'+(e?"right":"left")+'"></span>')(t))}}}}function i(t){return t()}function a(t){return t(!0)}function o(r){return function(e,o){return function(t,n){return e(t,n),function(t,n,e){var i,a;o&&o(t,n,e),n.removeAttr((i=e,a=this.name,i.$attr[a])),r(n)(t)}}}}function r(t,c,s){var l="$manage";return{restrict:"A",require:"^^ptList",terminal:!0,priority:1e3,compile:t(function(t,n){var e=n.ptItem||"$item";n.$set("ngRepeat",e+" in $list"),t.prepend('<td class="text-right">{{getRowNumber($index) | number}}</td>');var i=n.ptItemManage;i&&t.append('<td><div class="btn-group" role="group" ng-if="!'+e+'.$editing"><button type="button" class="btn btn-default" ng-click="'+l+'.$startEdition($index)" ng-if="'+i+'.edit"><span class="fas fa-edit"></span></button><button type="button" class="btn btn-default" ng-click="'+l+'.$delete($index)" ng-if="'+i+'.delete"><span class="fas fa-trash"></span></button></div><div class="btn-group" role="group" ng-if="'+e+'.$editing"><button type="button" class="btn btn-default" ng-click="'+l+'.$edit($index)"><span class="fas fa-check"></span></button><button type="button" class="btn btn-default" ng-click="'+l+'.$cancelEdition($index)"><span class="fas fa-times"></span></button></div></td>')},function(n,t,e){var i=n.$eval(e.ptItemManage);function a(t){return n.totalItems[s(n,t)]}function o(t,n){t?t.then(function(){n()}):n()}function r(t){var n=a(t);delete n.$old,delete n.$editing}i&&(n[l]={$startEdition:function(t){var n=a(t);n.$old=angular.copy(n),n.$editing=!0},$delete:function(t){c.deletionConfirmation()&&o(i.delete(a(t)),function(){n.$apply(function(){n.totalItems.splice(s(n,t),1)})})},$edit:function(t){var n=angular.copy(a(t)),e=n.$old;delete n.$old,delete n.$editing,o(i.edit(n,e),function(){r(t)})},$cancelEdition:function(t){var i=a(t);angular.forEach(i,function(t,n){if("$old"!=n&&"$editing"!=n){var e=i.$old[n];void 0===e?delete i[n]:i[n]=e}}),r(t)}})})}}function c(t){return function(e){return{restrict:"A",require:"^^ptList",compile:t(function(t,n){n.$set("ngIf",(e?"":"!")+t.parents("[pt-item-manage]").attr("ng-repeat").split(" in ")[0]+".$editing")})}}}function s(t){return t()}function l(t){return t(!0)}function u(t){return{restrict:"A",require:"^^ptList",terminal:!0,priority:1e3,compile:t(function(t,n){var e=n.ptOrder;t.append('<button type="button" class="btn btn-default btn-xs pull-right btn-pt-records" ng-class="{active: isActive(\''+e+"')}\" ng-click=\"sort('"+e+'\')"><span class="fas" ng-class="getIconClass(\''+e+"')\"></span></button>")})}}t.$inject=["uibPaginationConfig"],n.$inject=["$filter","getItemIndex","uibPaginationConfig","PT_RECORDS_TEXTS","PT_PAGINATION_CLASS_NAME","$compile"],e.$inject=["PT_PAGINATION_CLASS_NAME","$compile"],i.$inject=["getPaginationBtnDirectiveOptions"],a.$inject=["getPaginationBtnDirectiveOptions"],o.$inject=["$compile"],r.$inject=["getDirectiveAutocompileFunction","PT_CONFIG","getItemIndex"],c.$inject=["getDirectiveAutocompileFunction"],s.$inject=["getItemManageDirectiveOptions"],l.$inject=["getItemManageDirectiveOptions"],u.$inject=["getDirectiveAutocompileFunction"],angular.module("proaTools.records").constant("PT_PAGINATION_CLASS_NAME","pagination-pt-records").factory("getItemIndex",t).directive("ptList",n).factory("getPaginationBtnDirectiveOptions",e).directive("paginationPrev",i).directive("paginationNext",a).factory("getDirectiveAutocompileFunction",o).constant("PT_CONFIG",{deletionConfirmation:function(){return confirm("Do you really want to delete?")}}).directive("ptItem",r).factory("getItemManageDirectiveOptions",c).directive("ptItemManageOutput",s).directive("ptItemManageInput",l).directive("ptOrder",u)}();