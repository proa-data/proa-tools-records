/*!
 * Proa Tools Records v1.3.0 (https://github.com/proa-data/proa-tools-records)
 */
angular.module("proaTools.records",["ngAria","ui.bootstrap"]),function(){function t(t){t.maxSize=5,t.forceEllipses=!0,t.previousText="⯇",t.nextText="⯈",t.boundaryLinkNumbers=!0}t.$inject=["uibPaginationConfig"],angular.module("proaTools.records").config(t)}(),angular.module("proaTools.records").constant("PT_RECORDS_TEXTS",{number:"#",noData:"No data"}),function(){function t(e,r,i,s){return t.$inject=["$scope","$attrs"],{restrict:"A",scope:!0,controller:t,compile:function(){return function(n,t){var e=0;t.find("thead > tr:first").prepend(o("<th>"+i.number+"</th>")).find("th").each(function(){e+=angular.element(this).prop("colspan")}).end().end().find("tbody").append(o('<tr><td colspan="'+e+'" ng-if="!totalItems.length">'+i.noData+"</td></tr>")),n.exportingTable=t.get(0);var a=t.parent();function o(t){return s(t)(n)}a.hasClass("table-responsive")&&(t=a),t.before(o('<div class="clearfix" ng-show="totalItems.length"><ul uib-pagination total-items="totalItems.length" ng-model="currentPage" class="pagination-pt-records pull-left" ng-show="enabledPagination"></ul><div class="btn-group pull-right" role="group"><button type="button" class="btn btn-default" ng-click="disablePagination()" ng-show="enabledPagination"><span class="fa-stack fa-stack-pt-records"><span class="far fa-file fa-stack-1x"></span><span class="fas fa-slash fa-stack-1x"></span></span></button><button type="button" class="btn btn-default" ng-click="enablePagination()" ng-show="!enabledPagination"><span class="far fa-file"></span></button><button type="button" class="btn btn-default" ng-click="exportToXls()"><span class="fas fa-file-excel"></span></button></div></div>'))}}};function t(a,t){var o=e("limitTo"),i=e("orderBy");function n(){var t=a.orderConfig,n=i(a.totalItems,t.property,t.desc);if(a.enabledPagination){var e=r.itemsPerPage;a.$list=o(n,e,(a.currentPage-1)*e)}else a.$list=n}a.currentPage=1,a.enabledPagination=void 0===t.ptNoPagination,a.disablePagination=function(){a.enabledPagination=!1},a.enablePagination=function(){a.enabledPagination=!0},a.getRowNumber=function(t){var n=t+1;return a.enabledPagination?(a.currentPage-1)*r.itemsPerPage+n:n},a.exportToXls=function(){XLSX.writeFile(XLSX.utils.table_to_book(a.exportingTable),(t.ptFilename||"Excel")+".xlsx")},a.orderConfig={},a.sort=function(t){var n=a.orderConfig;n.property==t?(n.desc&&(t=void 0),n.desc=!n.desc):n.desc=!1;n.property=t},a.isActive=function(t){return a.orderConfig.property==t},a.getIconClass=function(t){var n=a.orderConfig;return"glyphicon-"+(n.property==t?"arrow-"+(n.desc?"down":"up"):"sort")},a.$watchCollection(t.ptList,function(t){a.totalItems=t,n()}),a.$watch("currentPage",n),a.$watch("enabledPagination",n),a.$watchCollection("orderConfig",n)}}function n(o){return function(t,n,e){n.removeAttr(i(e,t));var a=o(n);return function(t){a(t)}}}function e(e){return{restrict:"A",require:"^^ptList",terminal:!0,priority:1e3,compile:function(t,n){return n.$set("ngRepeat",(t.attr(i(n,"ptItem"))||"$item")+" in $list"),t.prepend('<td class="text-right">{{getRowNumber($index) | number}}</td>'),e("ptItem",t,n)}}}function a(a){return{restrict:"A",require:"^^ptList",terminal:!0,priority:1e3,compile:function(t,n){var e=n.ptOrder;return t.append(' <button type="button" class="btn btn-default btn-xs pull-right btn-pt-records" ng-class="{active: isActive(\''+e+"')}\" ng-click=\"sort('"+e+'\')"><span class="glyphicon" ng-class="getIconClass(\''+e+"')\"></span></button>"),a("ptOrder",t,n)}}}function i(t,n){return t.$attr[n]}t.$inject=["$filter","uibPaginationConfig","PT_RECORDS_TEXTS","$compile"],n.$inject=["$compile"],e.$inject=["compilerPostLink"],a.$inject=["compilerPostLink"],angular.module("proaTools.records").directive("ptList",t).factory("compilerPostLink",n).directive("ptItem",e).directive("ptOrder",a)}();